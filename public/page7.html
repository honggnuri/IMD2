<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sejong Bloom</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="step-1" class="img_container">
            <img id="main-image" src="/assets/onbording.jpg" alt="Step Image">
        </div>
        <button id="next-btn" class="next-btn" onclick="handleButtonClick()">응!</button>
    </div>

    <script>
        let clickCount = 0;

        // 1. 이전 페이지에서 선택한 동네 정보 가져오기
        const storedDistrict = localStorage.getItem('userDistrict') || 'dodam';

        // 2. [매칭 테이블] 동네별 이미지 설정
        // first: 접속하자마자 보일 이미지 / second: 버튼 1번 누른 후 보일 이미지
        const districtContent = {
            'eojindong': { first: '/assets/eojin_01.jpg', second: '/assets/eojin_02.jpg' },
            'dodam': { first: '/assets/dodam_01.jpg', second: '/assets/dodam_02.jpg' },
            'areum': { first: '/assets/areum_01.jpg', second: '/assets/areum_02.jpg' },
            'hamildong': { first: '/assets/hamil_01.jpg', second: '/assets/hamil_02.jpg' },
            'naseongdong': { first: '/assets/naseong_01.jpg', second: '/assets/naseong_02.jpg' },
            'bangok_jiphyeon': { first: '/assets/bangok_01.jpg', second: '/assets/bangok_02.jpg' },
            'jochiwon': { first: '/assets/jochiwon_01.jpg', second: '/assets/jochiwon_02.jpg' },
            'jeonui_myeon': { first: '/assets/jeonui_01.jpg', second: '/assets/jeonui_02.jpg' },
            'yeonseomyeon': { first: '/assets/yeonseo_01.jpg', second: '/assets/yeonseo_02.jpg' },
            'bugangmyeon': { first: '/assets/bugang_01.jpg', second: '/assets/bugang_02.jpg' },
            'geumnammyeon': { first: '/assets/geumnam_01.jpg', second: '/assets/geumnam_02.jpg' },
            'yeongimyeon': { first: '/assets/yeongi_01.jpg', second: '/assets/yeongi_02.jpg' },
            'janggunmyeon': { first: '/assets/janggun_01.jpg', second: '/assets/janggun_02.jpg' },
            'yeondongmyeon': { first: '/assets/yeondong_01.jpg', second: '/assets/yeondong_02.jpg' },
            'otherarea': { first: '/assets/other_01.jpg', second: '/assets/other_02.jpg' }
        };

        const imgElement = document.getElementById('main-image');
        const btnElement = document.getElementById('next-btn');

        // 3. [초기 실행] 페이지 접속하자마자 첫 번째 이미지 세팅
        window.onload = function() {
            if (districtContent[storedDistrict]) {
                imgElement.src = districtContent[storedDistrict].first;
            }
        };

        // 4. [클릭 이벤트] 버튼 동작
        function handleButtonClick() {
            clickCount++;

            if (clickCount === 1) {
                // --- 첫 번째 클릭: 해당 동네의 두 번째 이미지로 변경 ---
                if (districtContent[storedDistrict]) {
                    imgElement.src = districtContent[storedDistrict].second;
                }
                
                // 버튼 텍스트 변경
                btnElement.innerText = '꽃 만들러 가기';

            } else if (clickCount === 2) {
                // --- 두 번째 클릭: 다음 페이지로 이동 ---
                location.href = 'page8.html'; 
            }
        }
    </script>
</body>
</html>